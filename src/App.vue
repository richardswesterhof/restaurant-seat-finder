<template>
  <div id="app">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css">
    <Header></Header>

    <b-message
      title="Attention"
      type="is-primary"
      style="margin: -4.5vh 5% 0 5%; background-color: whitesmoke;"
      :closable="false"
      :active.sync="dataCollectionMessageOpen"
    >
      We would like to collect usage statistics and data to improve our website. By clicking 'Agree' you agree that we can collect anonymous data from your usage.
      <div>
        <b-button type="is-primary" @click="canCollectData(true)">Agree</b-button>
        <b-button @click="canCollectData(false)">Decline</b-button>
      </div>
    </b-message>

    <router-view id="main-router"/>
    <Footer></Footer>
  </div>
</template>

<script>
  import Header from "./components/PageAddons/Header";
  import Footer from "./components/PageAddons/Footer";


  export default {
    name: 'App',
    components: {Footer, Header},

    mounted() {
      //TODO: try to login.
    },

    data() {
      return {
        dataCollectionMessageOpen: true,
      }
    },


    methods: {
      canCollectData(bool) {
        this.$store.dispatch('canCollectData', {tf: bool});
        this.dataCollectionMessageOpen = false;
      },
    },
  }
</script>

<style>
  html,
  body {
    height: 100%;
    min-height:100% !important;
    margin: 0;
    padding: 0;
  }

  #app {
    font-family: 'Avenir', Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /*text-align: center;*/
    background-color: var(--lightGrey);
    /*margin-top: 60px;*/
    right: 0;
    width: 100%;

    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
    min-height: 100% !important;
  }

  #main-router {
    -webkit-box-flex: 1;
    -ms-flex: 1;
    flex: 1;
  }

</style>

<style lang="scss">
  // Import Bulma's core
  @import "~bulma/sass/utilities/_all";

  // Set your colors
  $primary: #1abc9c;
  $primary-invert: findColorInvert($primary);
  $twitter: #4099FF;
  $twitter-invert: findColorInvert($twitter);

  // Setup $colors to use as bulma classes (e.g. 'is-twitter')
  $colors: (
    "white": ($white, $black),
    "black": ($black, $white),
    "light": ($light, $light-invert),
    "dark": ($dark, $dark-invert),
    "primary": ($primary, $primary-invert),
    "info": ($info, $info-invert),
    "success": ($success, $success-invert),
    "warning": ($warning, $warning-invert),
    "danger": ($danger, $danger-invert),
    "twitter": ($twitter, $twitter-invert)
  );

  // Links
  $link: $primary;
  $link-invert: $primary-invert;
  $link-focus-border: $primary;


  @import "~bulma";
  @import "~buefy/src/scss/buefy";
</style>
